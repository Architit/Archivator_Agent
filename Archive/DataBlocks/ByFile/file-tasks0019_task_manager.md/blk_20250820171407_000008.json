{
  "block_id": "blk_20250820171407_000008",
  "parent_sha256": "ba7ba24e061948edd99bcbf731712e4886bf86d755eb57a8312489f9a667f915",
  "src_file": "file-tasks0019_task_manager.md",
  "seq": 1,
  "total_seqs": 1,
  "encoding": "utf-8",
  "lang": "ru",
  "status": "ok",
  "size_bytes": 4239,
  "hash_sha256": "ba7ba24e061948edd99bcbf731712e4886bf86d755eb57a8312489f9a667f915",
  "tags": [],
  "text": "┌─ <file> tasks/0019_task_manager.md\r\n│\r\n│ # 019 — Task Manager  (функциональные задачи и дорожная карта)\r\n│\r\n│ ## Overview\r\n│ В LAM‑экосистеме теперь три параллельных «потока»:\r\n│   • TestManager — тест‑циклы,  \r\n│   • FixManager — баги,  \r\n│   • **TaskManager** — продуктовые задачи, улучшения, идеи.  \r\n│\r\n│ Цель TaskManager: хранить и отслеживать фичи/улучшения,\r\n│ связывать их с Release (#010), автоматически формировать\r\n│ CHANGELOG и подсвечивать зависимость «фиксы закрыты —\r\n│ фича считается done».\r\n│\r\n│ ## Goals / Acceptance\r\n│ - Модуль `lam.task_manager.TaskManager` с CRUD + JSON‑storage.  \r\n│ - Enum `TaskStatus {TODO, IN_PROGRESS, REVIEW, DONE, DEFERRED}`.  \r\n│ - Поля `kind` {feature, improvement, chore, research}.  \r\n│ - Взаимосвязь: Task может ссылаться на Fix‑ID и Test‑ID\r\n│   (`blocks`, `depends_on`).  \r\n│ - FastAPI роуты:  \r\n│     * **GET  /task** `?status=TODO&kind=feature`  \r\n│     * **POST /task** (body title,desc,kind,tags,blocks?)  \r\n│     * **PATCH /task/{id}`** (status,owner,depends_on)  \r\n│ - CLI команды:  \r\n│     ```\r\n│     lam task add            --title \"Dashboard PWA\" --kind feature\r\n│     lam task list           --status TODO\r\n│     lam task set <id>       --status IN_PROGRESS --owner Kyrylo\r\n│     lam task link-fix <id>  F12345   # blocks\r\n│     ```\r\n│ - Dashboard: вкладка “Roadmap” — канбан‑доска (TODO ➜ DONE).  \r\n│ - Тесты `tests/test_task_manager.py` покрытие ≥ 90 %.\r\n│\r\n│ ## Prompts\r\n│\r\n│ ### LAM prompt\r\n│ «Используй правила приоритета Roadmap:  \r\n│  • feature без блокирующих фиксов ⇒ приоритет low,  \r\n│  • feature + critical fix ⇒ priority high,  \r\n│  • research ≥ 14 дней без активности ⇒ статус DEFERRED.  \r\n│  При переходе в DONE сформируй заметку для CHANGELOG.»\r\n│\r\n│ ### User prompt  (Kyrylo → LAM)\r\n│ «/task add title:\"<что сделать>\"  \r\n│    description:\"<почему важно>\"  \r\n│    kind:feature|improvement|chore|research  \r\n│    tags:[…]  \r\n│    blocks:[FixID,…]»  \r\n│ LAM вернёт id, предложит owner и эстимейт.\r\n│\r\n│ ### Codex prompt\r\n│ 1. Создать `lam/task_manager.py` (CRUD + JSON).  \r\n│ 2. Структура `TaskItem` : id, title, desc, created_at,\r\n│    status, kind, tags [], owner?, blocks [FixID], depends_on [TaskID].  \r\n│ 3. FastAPI router `router_tasks.py`, тег «task».  \r\n│ 4. CLI sub‑app `lam task …` через `typer`.  \r\n│ 5. Канбан‑endpoint `/task/board` — сгруппированная выдача по status.  \r\n│ 6. Тесты: создание, смена статуса, блокировки (не может стать DONE,\r\n│    если есть OPEN FixID в blocks).  \r\n│\r\n│ ### Operator prompt  (DevOps/CI)\r\n│ - В README раздел **“Roadmap workflow”**.  \r\n│ - Ночной cron‑job:  \r\n│     `lam task list --status TODO --kind research`  \r\n│   → summary в лог.  \r\n│ - Вернились все blocking‑фиксы ➜ CI‑бот отмечает Task DONE\r\n│   и генерирует PR «CHANGELOG update».  \r\n│\r\n│ ### Agent prompt  (Roadmap‑bot)\r\n│ - На каждый Pull Request ищи “implements #T<ID>”:  \r\n│   → `PATCH /task/{ID}` status=REVIEW owner=«<PR author>».  \r\n│ - После merge → status = DONE, добавляем строку в `CHANGELOG.md`.  \r\n│\r\n│ ## File map\r\n│ ```\r\n│ lam/\r\n│   task_manager.py\r\n│   web/router_tasks.py\r\n│ tasks/019_task_manager.md\r\n│ tests/test_task_manager.py\r\n│ memory/tasks.json             # авто‑создаётся\r\n│ ```\r\n│\r\n│ ∴\r\n└─\r\n"
}